<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>毛毛博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="毛毛博客">
<meta property="og:url" content="https://delicious28.github.io/index.html">
<meta property="og:site_name" content="毛毛博客">
<meta property="og:locale">
<meta property="article:author" content="mm">
<meta property="article:tag" content="技术文档">
<meta name="twitter:card" content="summary">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- <link type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet"> -->
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/scrollUp/image.css">

  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
<meta name="generator" content="Hexo 5.3.0"></head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <div class="logo">
        <img src="/webwxgeticon.jpeg" alt="Profile Picture">
      </div>
      <div id="title">毛毛博客</div>
      
        <div id="subtitle">技术积累</div>
      
       <ul class="my-socials">
  
 
</ul>
    </div>
  </div>
  <div id="header-inner" class="">
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <!--
        
          
            <a class="main-nav-link" href="/">首页</a>
          
            <a class="main-nav-link" href="/categories/H5">H5</a>
          
            <a class="main-nav-link" href="/categories/Android">Andoird</a>
          
            <a class="main-nav-link" href="/categories/NodeJS">NodeJS</a>
          
            <a class="main-nav-link" href="/archives">归档</a>
          
        
      -->
    </nav>
    <nav id="title-nav" style="display:none">
      <a href="/">毛毛博客</a>
      <img src="/webwxgeticon.jpeg" alt="Profile Picture">
      <!--
      <span id="title-nav-socials">
        
       
     </span>
      -->
    </nav>
    <nav id="sub-nav">
      
      <a id="nav-search-btn" class="nav-icon" title="Search"></a>
    </nav>
    <div id="search-form-wrap">
      <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
        <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
        <input type="submit" value="" class="search-form-submit">
        <input name=tn type=hidden value="bds">
        <input name=cl type=hidden value="3">
        <input name=ct type=hidden value="2097152">
        <input type="hidden" name="si" value="delicious28.github.io">
      </form>
    </div>
  </div>
  <div class="site-nav" style="display: none;">
    <ul>
      
      
        <li><a href="/">首页</a></li>
      
        <li><a href="/categories/H5">H5</a></li>
      
        <li><a href="/categories/Android">Andoird</a></li>
      
        <li><a href="/categories/NodeJS">NodeJS</a></li>
      
        <li><a href="/archives">归档</a></li>
      
      
    </ul>
  </div>
</header>
      <div class="outer">
        <section id="main">
  

    
    <article id="post-webview打开时有瞬间白屏的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/23/webview%E6%89%93%E5%BC%80%E6%97%B6%E6%9C%89%E7%9E%AC%E9%97%B4%E7%99%BD%E5%B1%8F%E7%9A%84%E9%97%AE%E9%A2%98/" class="article-date">
  <time datetime="2021-01-23T05:09:34.000Z" itemprop="datePublished">2021-01-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android-H5/">Android,H5</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/23/webview%E6%89%93%E5%BC%80%E6%97%B6%E6%9C%89%E7%9E%AC%E9%97%B4%E7%99%BD%E5%B1%8F%E7%9A%84%E9%97%AE%E9%A2%98/">webview打开时有瞬间白屏的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="遇到的效果是打开webview的时候会有白屏的效果，如下面这样"><a href="#遇到的效果是打开webview的时候会有白屏的效果，如下面这样" class="headerlink" title="遇到的效果是打开webview的时候会有白屏的效果，如下面这样"></a>遇到的效果是打开webview的时候会有白屏的效果，如下面这样</h3><div style="width:200px;margin:auto">
<img src="/2021/01/23/webview%E6%89%93%E5%BC%80%E6%97%B6%E6%9C%89%E7%9E%AC%E9%97%B4%E7%99%BD%E5%B1%8F%E7%9A%84%E9%97%AE%E9%A2%98/1611378960352.gif" class="">
</div>

<h3 id="找了很久的原因，总结下来有这样几点"><a href="#找了很久的原因，总结下来有这样几点" class="headerlink" title="找了很久的原因，总结下来有这样几点"></a>找了很久的原因，总结下来有这样几点</h3><p><strong>1、 loadUrl的时间</strong></p>
<p>如果打开activity的时候webview已经加载了，但这个时候url由于各种原因还没有获取到，没有执行 webView.loadUrl，如果这样请先隐藏webview，准备好后再显示</p>
<p><strong>2、加载HTML的时间</strong></p>
<p>我的做法是webview先隐藏，等到HTML加载完后再显示</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageFinished</span><span class="params">(WebView view, String url)</span> </span>&#123;</span><br><span class="line">    view.setVisibility(View.VISIBLE);</span><br><span class="line">    <span class="keyword">super</span>.onPageFinished(view, url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>如果这样打开时还是会有瞬间白屏的闪烁，那可能就要从网页端着手进行优化了</p>
<p><strong>3、网页打开时在html里直接给body设一个背景色</strong></p>
<p>因为网页的一些样式和图片是需要下载的，如果是单页面的话还要等JS下载完执行后才进行渲染，这都要时间</p>
<p>所以直接在html返回时就直接在页面里给页面元素定义个背景色</p>
<p>直接在head里给body设了背景图和背景色</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    body&#123;</span><br><span class="line">      background-image: url(&#x27;./img/app-local-loading-bg.png&#x27;);</span><br><span class="line">      background-repeat: no-repeat;</span><br><span class="line"><span class="css">      <span class="selector-tag">background-color</span>: <span class="selector-id">#5a0037</span>;</span></span><br><span class="line"><span class="css">      <span class="selector-tag">background-size</span><span class="selector-pseudo">:cover</span>;</span></span><br><span class="line">    &#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://delicious28.github.io/2021/01/23/webview%E6%89%93%E5%BC%80%E6%97%B6%E6%9C%89%E7%9E%AC%E9%97%B4%E7%99%BD%E5%B1%8F%E7%9A%84%E9%97%AE%E9%A2%98/" data-id="ckk99j20t0000tswx6zpg8t4x" class="article-share-link">Share</a>
      

      
    </footer>
  </div>
  
</article>


    
  

    
    <article id="android版本与sdk-int对应关系-android版本与sdk-int对应关系" class="article article-type-android版本与sdk-int对应关系" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/20/android%E7%89%88%E6%9C%AC%E4%B8%8Esdk-int%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/" class="article-date">
  <time datetime="2021-01-20T08:18:38.000Z" itemprop="datePublished">2021-01-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/20/android%E7%89%88%E6%9C%AC%E4%B8%8Esdk-int%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/">int对应关系</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Android开发中经常会用需要知道Android版本与SDK_INT的对应关系，所以这里总结一下，方便以后查看。</p>
<p>官方链接地址:</p>
<p><a target="_blank" rel="noopener" href="https://developer.android.com/guide/topics/manifest/uses-sdk-element.html">https://developer.android.com/guide/topics/manifest/uses-sdk-element.html</a></p>
<p>Android版本与Android sdk int的对应关系如下:</p>
<table>
<thead>
<tr>
<th>平台版本</th>
<th>API 级别</th>
<th>VERSION_CODE</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Android 10.0</td>
<td>29</td>
<td>Q</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 9</td>
<td>28</td>
<td>P</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 8.1</td>
<td>27</td>
<td>O_MR1</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 8.0</td>
<td>26</td>
<td>O</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 7.1.1</td>
<td>Android 7.1.1</td>
<td>Android 7.1.1</td>
<td>Android 7.1.1</td>
</tr>
<tr>
<td>Android 7.1</td>
<td>25</td>
<td>N_MR1</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 7.0</td>
<td>24</td>
<td>N</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 6.0</td>
<td>23</td>
<td>M</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 5.1</td>
<td>22</td>
<td>LOLLIPOP_MR1</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 5.0</td>
<td>21</td>
<td>LOLLIPOP</td>
<td>Android 5.0</td>
</tr>
<tr>
<td>Android 4.4W</td>
<td>20</td>
<td>KITKAT_WATCH</td>
<td>仅限 KitKat for Wearables</td>
</tr>
<tr>
<td>Android 4.4</td>
<td>19</td>
<td>KITKAT</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 4.3</td>
<td>18</td>
<td>JELLY_BEAN_MR2</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 4.2、4.2.2</td>
<td>17</td>
<td>JELLY_BEAN_MR1</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 4.1、4.1.1</td>
<td>16</td>
<td>JELLY_BEAN</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 4.0.3、4.0.4</td>
<td>15</td>
<td>ICE_CREAM_SANDWICH_MR1</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 4.0、4.0.1、4.0.2</td>
<td>14</td>
<td>ICE_CREAM_SANDWICH</td>
<td>Android 4.0、4.0.1、4.0.2</td>
</tr>
<tr>
<td>Android 3.2</td>
<td>13</td>
<td>HONEYCOMB_MR2</td>
<td></td>
</tr>
<tr>
<td>Android 3.1.x</td>
<td>12</td>
<td>HONEYCOMB_MR1</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 3.0.x</td>
<td>11</td>
<td>HONEYCOMB</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 2.3.4</td>
<td>Android 2.3.4</td>
<td>Android 2.3.4</td>
<td>Android 2.3.4</td>
</tr>
<tr>
<td>Android 2.3.3</td>
<td>10</td>
<td>GINGERBREAD_MR1</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 2.3.2</td>
<td>Android 2.3.2</td>
<td>Android 2.3.2</td>
<td>Android 2.3.2</td>
</tr>
<tr>
<td>Android 2.3.1</td>
<td>Android 2.3.1</td>
<td>Android 2.3.1</td>
<td>Android 2.3.1</td>
</tr>
<tr>
<td>Android 2.3</td>
<td>9</td>
<td>GINGERBREAD</td>
<td>Android 2.3</td>
</tr>
<tr>
<td>Android 2.2.x</td>
<td>8</td>
<td>FROYO</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 2.1.x</td>
<td>7</td>
<td>ECLAIR_MR1</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 2.0.1</td>
<td>6</td>
<td>ECLAIR_0_1</td>
<td>Android 2.0.1</td>
</tr>
<tr>
<td>Android 2.0</td>
<td>5</td>
<td>ECLAIR</td>
<td>Android 2.0</td>
</tr>
<tr>
<td>Android 1.6</td>
<td>4</td>
<td>DONUT</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 1.5</td>
<td>3</td>
<td>CUPCAKE</td>
<td>平台亮点</td>
</tr>
<tr>
<td>Android 1.1</td>
<td>2</td>
<td>BASE_1_1</td>
<td></td>
</tr>
<tr>
<td>Android 1.0</td>
<td>1</td>
<td>BASE</td>
<td></td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://delicious28.github.io/2021/01/20/android%E7%89%88%E6%9C%AC%E4%B8%8Esdk-int%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB/" data-id="ckk55sg0q0000qmwx24rr9foj" class="article-share-link">Share</a>
      

      
    </footer>
  </div>
  
</article>


    
  

    
    <article id="post-解决Android下载gradle慢的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/19/%E8%A7%A3%E5%86%B3Android%E4%B8%8B%E8%BD%BDgradle%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98/" class="article-date">
  <time datetime="2021-01-19T07:29:00.000Z" itemprop="datePublished">2021-01-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/19/%E8%A7%A3%E5%86%B3Android%E4%B8%8B%E8%BD%BDgradle%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98/">解决Android下载gradle慢的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="使用国内镜像进行替换加速"><a href="#使用国内镜像进行替换加速" class="headerlink" title="使用国内镜像进行替换加速"></a>使用国内镜像进行替换加速</h2><ol>
<li><p>打开工程文件根目录 build.gradle</p>
</li>
<li><p>在 buildscript 和 allprojects 的 repositories 中分别注释掉 jcenter()，并使用国内镜像进行替换：maven{url ‘<a target="_blank" rel="noopener" href="http://maven.aliyun.com/nexus/content/groups/public/&#39;}">http://maven.aliyun.com/nexus/content/groups/public/&#39;}</a></p>
</li>
<li><p>在 buildscript 的 repositories 添加：maven{url “<a target="_blank" rel="noopener" href="https://jitpack.io&quot;}/">https://jitpack.io&quot;}</a></p>
</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven&#123;url &#x27;http://maven.aliyun.com/nexus/content/groups/public/&#x27;&#125;</span><br><span class="line">        maven&#123;url &quot;https://jitpack.io&quot;&#125;</span><br><span class="line"><span class="comment">//        jcenter()</span></span><br><span class="line">    &#125;</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        classpath &#x27;com.android.tools.build:gradle:2.2.0&#x27;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Do not place your application dependencies here; they belong</span></span><br><span class="line">        <span class="comment">// in the individual module build.gradle files</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven&#123;url &#x27;http://maven.aliyun.com/nexus/content/groups/public/&#x27;&#125;</span><br><span class="line"><span class="comment">//        jcenter()</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">task clean(type: Delete) &#123;</span><br><span class="line">    delete rootProject.buildDir</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后发现心里感觉会快些。。。</p>
<hr>
<p>实在忍不住可以尝试手动下载gradle<br>参考：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/558e5955bfbd?from=singlemessage">https://www.jianshu.com/p/558e5955bfbd?from=singlemessage</a><br>ps: 最后复制一份gradle-x.x.x-all.zip.lck文件，重命名为gradle-x.x.x-all.zip.ok；</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://delicious28.github.io/2021/01/19/%E8%A7%A3%E5%86%B3Android%E4%B8%8B%E8%BD%BDgradle%E6%85%A2%E7%9A%84%E9%97%AE%E9%A2%98/" data-id="ckk3oijo10000bnwxajh89b8o" class="article-share-link">Share</a>
      

      
    </footer>
  </div>
  
</article>


    
  

    
    <article id="post-webview读取android内图片" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/15/webview%E8%AF%BB%E5%8F%96android%E5%86%85%E5%9B%BE%E7%89%87/" class="article-date">
  <time datetime="2021-01-15T07:53:24.000Z" itemprop="datePublished">2021-01-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/15/webview%E8%AF%BB%E5%8F%96android%E5%86%85%E5%9B%BE%E7%89%87/">webview读取android内图片</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>为了进一步优化Android内网页的打开速度，准备将静态图片全都放进app内，不再去请求网络。</p>
<p>曾尝试直接在网页里把图片地址写成 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">file:&#x2F;&#x2F;&#x2F;android_asset&#x2F;xxx.png</span><br></pre></td></tr></table></figure>
<p>图片虽然存在，但浏览器会报</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Not allowed to load local resource</span><br></pre></td></tr></table></figure>
<p>为了解决这个问题需要换一个思路，通过拦截webview的request请求，然后返回本地图片来解决</p>
<p>判断如果图片名称包含app-local的，并且app内有这张图片的，便直接返回应用内的图片</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> WebResourceResponse <span class="title">shouldInterceptRequest</span><span class="params">(WebView view, WebResourceRequest request)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String url = request.getUrl().toString();</span><br><span class="line"></span><br><span class="line">    AssetManager assets = mContext.getResources().getAssets();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (url.contains(<span class="string">&quot;app-local&quot;</span>)) &#123;</span><br><span class="line">        String fileName = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        Pattern pat=Pattern.compile(<span class="string">&quot;[\\w-]+[\\.][\\w-]+[\\.](\\w)+.$&quot;</span>);<span class="comment">//正则判断</span></span><br><span class="line">        Matcher mc=pat.matcher(url);<span class="comment">//条件匹配</span></span><br><span class="line">        <span class="keyword">while</span>(mc.find()) &#123;</span><br><span class="line">            fileName= mc.group();<span class="comment">//截取文件名后缀名</span></span><br><span class="line">            fileName = fileName.replaceAll(<span class="string">&quot;\\.(\\w+)\\.&quot;</span>,<span class="string">&quot;.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(fileName!=<span class="string">&quot;&quot;</span>)&#123;</span><br><span class="line">            InputStream input = getClass().getResourceAsStream(<span class="string">&quot;/assets/cacheImg/&quot;</span>+fileName);</span><br><span class="line">            <span class="keyword">if</span>(input!=<span class="keyword">null</span>)&#123;</span><br><span class="line">                WebResourceResponse response = <span class="keyword">new</span> WebResourceResponse(<span class="string">&quot;image/png&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>, input);</span><br><span class="line">                <span class="keyword">return</span> response;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">super</span>.shouldInterceptRequest(view, request);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://delicious28.github.io/2021/01/15/webview%E8%AF%BB%E5%8F%96android%E5%86%85%E5%9B%BE%E7%89%87/" data-id="ckjxzv1d40000rowx256u0eht" class="article-share-link">Share</a>
      

      
    </footer>
  </div>
  
</article>


    
  

    
    <article id="post-Android内Webview上传文件的解决方案" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/11/Android%E5%86%85Webview%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" class="article-date">
  <time datetime="2021-01-11T08:51:39.000Z" itemprop="datePublished">2021-01-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/11/Android%E5%86%85Webview%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">Android内Webview上传文件的解决方案</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>网上大部分的都是兼容android3，android4的 可以参考这个 <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/5907369/file-upload-in-webview">https://stackoverflow.com/questions/5907369/file-upload-in-webview</a></p>
<p>在高版本下以上方法是不生效的，可以参考下列代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mWebView.setWebChromeClient(<span class="keyword">new</span> WebChromeClient() &#123;</span><br><span class="line">     <span class="comment">//For Android API  = 21 (5.0 OS)</span></span><br><span class="line">     <span class="meta">@Override</span></span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onShowFileChooser</span><span class="params">(WebView webView, ValueCallback&lt;Uri[]&gt; filePathCallback, WebChromeClient.FileChooserParams fileChooserParams)</span> </span>&#123;</span><br><span class="line">         uploadMessageAboveL = filePathCallback;</span><br><span class="line">         openImageChooserActivity();</span><br><span class="line">         <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">     &#125;</span><br><span class="line">    	...</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">openImageChooserActivity</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     Intent intent = <span class="keyword">new</span> Intent(</span><br><span class="line">             Intent.ACTION_PICK,</span><br><span class="line">             android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);</span><br><span class="line">     startActivityForResult(intent, FILE_CHOOSER_RESULT_CODE);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(requestCode == FILE_CHOOSER_RESULT_CODE)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">null</span> == mUploadMessage &amp;&amp; <span class="keyword">null</span> == uploadMessageAboveL) <span class="keyword">return</span>;</span><br><span class="line">            Uri result = data == <span class="keyword">null</span> || resultCode != RESULT_OK ? <span class="keyword">null</span> : data.getData();</span><br><span class="line">            <span class="keyword">if</span> (uploadMessageAboveL != <span class="keyword">null</span>) &#123;</span><br><span class="line">                onActivityResultAboveL(requestCode, resultCode, data);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (mUploadMessage != <span class="keyword">null</span>) &#123;</span><br><span class="line">                mUploadMessage.onReceiveValue(result);</span><br><span class="line">                mUploadMessage = <span class="keyword">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TargetApi(Build.VERSION_CODES.LOLLIPOP)</span></span><br><span class="line">   <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onActivityResultAboveL</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent intent)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (requestCode != FILE_CHOOSER_RESULT_CODE || uploadMessageAboveL == <span class="keyword">null</span>)</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       Uri[] results = <span class="keyword">null</span>;</span><br><span class="line">       <span class="keyword">if</span> (resultCode == Activity.RESULT_OK) &#123;</span><br><span class="line">           <span class="keyword">if</span> (intent != <span class="keyword">null</span>) &#123;</span><br><span class="line">               String dataString = intent.getDataString();</span><br><span class="line">               ClipData clipData = intent.getClipData();</span><br><span class="line">               <span class="keyword">if</span> (clipData != <span class="keyword">null</span>) &#123;</span><br><span class="line">                   results = <span class="keyword">new</span> Uri[clipData.getItemCount()];</span><br><span class="line">                   <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; clipData.getItemCount(); i++) &#123;</span><br><span class="line">                       ClipData.Item item = clipData.getItemAt(i);</span><br><span class="line">                       results[i] = item.getUri();</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">               <span class="keyword">if</span> (dataString != <span class="keyword">null</span>)</span><br><span class="line">                   results = <span class="keyword">new</span> Uri[]&#123;Uri.parse(dataString)&#125;;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       uploadMessageAboveL.onReceiveValue(results);</span><br><span class="line">       uploadMessageAboveL = <span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://delicious28.github.io/2021/01/11/Android%E5%86%85Webview%E4%B8%8A%E4%BC%A0%E6%96%87%E4%BB%B6%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/" data-id="ckjsbv50u0000v6wxaol32dd1" class="article-share-link">Share</a>
      

      
    </footer>
  </div>
  
</article>


    
  

    
    <article id="android-报错解决" class="article article-type-android" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/11/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/" class="article-date">
  <time datetime="2021-01-11T08:46:45.000Z" itemprop="datePublished">2021-01-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Android/">Android</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/11/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/">Android NoClassDefFoundError with java.util.Base64 报错解决</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="java-lang-NoClassDefFoundError-Failed-resolution-of-Ljava-util-Base64"><a href="#java-lang-NoClassDefFoundError-Failed-resolution-of-Ljava-util-Base64" class="headerlink" title="java.lang.NoClassDefFoundError: Failed resolution of: Ljava/util/Base64"></a>java.lang.NoClassDefFoundError: Failed resolution of: Ljava/util/Base64</h2><p>在某些低端机上会报这个错</p>
<p>解决方案是使用 Android.util.Base64</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import android.util.Base64;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://delicious28.github.io/2021/01/11/%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3/" data-id="ckjsbtc2s0000t3wxg6980e72" class="article-share-link">Share</a>
      

      
    </footer>
  </div>
  
</article>


    
  

    
    <article id="post-如何用快速搭建个人博客" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/01/11/%E5%A6%82%E4%BD%95%E7%94%A8%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="article-date">
  <time datetime="2021-01-11T06:39:30.000Z" itemprop="datePublished">2021-01-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2021/01/11/%E5%A6%82%E4%BD%95%E7%94%A8%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">如何用快速搭建个人博客</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>当前这个博客使用的是 hexo 搭建，一个基于nodeJS的开源博客系统，通过本地编译然后上传至我的github。</p>
<p>官网：<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">https://hexo.io/zh-cn/</a></p>
<h2 id="第一步"><a href="#第一步" class="headerlink" title="第一步"></a>第一步</h2><p>在本地部署hexo</p>
<ul>
<li>npm install hexo-cli -g</li>
<li>hexo init blog</li>
<li>cd blog</li>
<li>npm install</li>
<li>hexo server</li>
</ul>
<h2 id="第二步"><a href="#第二步" class="headerlink" title="第二步"></a>第二步</h2><p>demo跑起来后，在github下创建一个新仓库，仓库名需按照 xxx.github.io 的规范来创建，创建好后再建一个名为 gh-pages 的分支</p>
<p>创建完后部署参考 <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/one-command-deployment">https://hexo.io/zh-cn/docs/one-command-deployment</a></p>
<p>要上传到gh-pages分支下才能在 xxx.github.io 下展示。</p>
<h2 id="vscode-里编写markdown的建议"><a href="#vscode-里编写markdown的建议" class="headerlink" title="vscode 里编写markdown的建议"></a>vscode 里编写markdown的建议</h2><p>可以安装一个 Markdown Preview Github Styling 的插件，安装后打开md文件，在右上角有个 Open Prewiew to the sid 的按钮，可以实时预览。</p>
<h2 id="一些hexo命令的简写"><a href="#一些hexo命令的简写" class="headerlink" title="一些hexo命令的简写"></a>一些hexo命令的简写</h2><p>hexo s –&gt; hexo server<br>hexo d -g –&gt; hexo deploy –generate<br>hexo g -d –&gt; hexo generate –deploy</p>
<h2 id="如何删除文章"><a href="#如何删除文章" class="headerlink" title="如何删除文章"></a>如何删除文章</h2><p>删除文章只需要删除source目下对应的md文件即可</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="https://delicious28.github.io/2021/01/11/%E5%A6%82%E4%BD%95%E7%94%A8%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" data-id="ckjsa2ihd0001x9wx2y0aai5z" class="article-share-link">Share</a>
      

      
    </footer>
  </div>
  
</article>


    
  
  
</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 mm<br>
      Theme <a href="https://github.com/henryhuang/oishi" target="_blank">Oishi</a>, Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <!--
      <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/categories/H5" class="mobile-nav-link">H5</a>
  
    <a href="/categories/Android" class="mobile-nav-link">Andoird</a>
  
    <a href="/categories/NodeJS" class="mobile-nav-link">NodeJS</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    -->
    

<!-- 百度分享 start -->

<!-- 百度分享 end -->

<script src="//cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/jquery.scrollUp.min.js"></script>


<script src="/js/jquery.transform.js"></script>


<script src="/js/menu.js"></script>



<script src="/js/script.js"></script>


<script src="/js/scrollUp.js"></script>


  </div>
</body>
</html>